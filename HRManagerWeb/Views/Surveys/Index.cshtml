@model IEnumerable<HRManager.domain.Entities.Survey>


@{ var loggedUser = Session["user"] as HRManagerWeb.Models.user; }
<div class="card shadow mb-4">
    <div class="card-header py-3">
        <h6 class="m-0 font-weight-bold text-primary">Surveys</h6>
    </div>
    <div class="card-body">
        <div class="table-responsive  justify-content-center ">
            <table class="table table-bordered " id="dataTable" width="100%" cellspacing="0">
                <thead>
                    <tr>
                        <th>Surveys</th>

                        <th style="width:320px">Actions</th>
                    </tr>
                </thead>


                <tbody>


                    @foreach (var item in Model)
                    {
                        <tr>
                            <td>

                                <div class="card shadow mb-4 ">
                                    <a href="#collapseCard" class="d-block card-header py-3" data-toggle="collapse" role="button" aria-controls="collapseCard">
                                        <h6 class="m-0 font-weight-bold text-primary"> @Html.DisplayFor(model => item.Title) |   @Html.DisplayNameFor(model => model.Date) :  @Html.DisplayFor(model => item.Date)</h6>
                                    </a>
                                    <div class="card-body collapse" id="collapseCard">

                                        <div class=" font-weight-bold text-info text-primary text-uppercase mb-1">
                                            Questions
                                        </div>
                                        @foreach (var question in item.Criteria)
                                        {
                                            <div class="font-weight-bold">
                                                @Html.DisplayFor(q => question.Description)

                                            </div>


                                        }


                                        <div class="h5 mb-0 font-weight-bold text-gray-800">

                                        </div>
                                    </div>
                                </div>
                            </td>

                            <td>
                                <div class="btn-group" style="margin-top:40px ">


                                    @if (loggedUser.role == "ADMINISTRATOR")
                                    {
                                        @Html.ActionLink("Delete", "Delete", new { item.SurveyId }, new { @class = "btn btn-primary" })
                                        @Html.ActionLink("Add Questions", "Question", new { item.SurveyId }, new { @class = "btn btn-primary" })
                                    }
                                    else
                                    {
                                        @Html.ActionLink("Fill Form", "FillSurvey", new { SurveyId = item.SurveyId, userId = loggedUser.id }, new { @class = "btn btn-primary" })
                                    }
                                </div>
                            </td>
                        </tr>
                    }
                    @if (loggedUser.role == "ADMINISTRATOR")
                    {
                        @Html.ActionLink("Create", "Create", new { loggedUser.id }, new { @class = "btn btn-primary float-right" })
                    }
                </tbody>
            </table>




        </div>
    </div>
</div>
